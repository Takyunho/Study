<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <br>
    배열.reduce( function(acc, cur, index, arr) {} [, initialValue] )</br>
    출처: <a href="https://inpa.tistory.com/entry/JS-📚-배열-고차함수-reduce?category=889099">https://inpa.tistory.com/entry/JS-📚-배열-고차함수-reduce?category=889099</a>[Inpa Dev 👨‍💻:티스토리]
  </p>

  <script>

    // reduce 활용 실전 예제

    //* 1. 객체 배열에서의 값 합산
    // 객체로 이루어진 배열에 들어 있는 값을 합산하기 위해서는 반드시 initialValue 초기값을 주어 각 항목이 함수를 거치도록 해야 한다.
    let initialValue = 0;
    let list = [
      { x: 1 },
      { x: 2 },
      { x: 3 }
    ];
    let sum = list.reduce(function (accumulator, currentValue) {
      return accumulator + currentValue.x;
    }, initialValue)

    console.log(sum)





    //* 2. 중첩 배열 펼치기
    let arr = [
      [0, 1],
      [2, 3],
      [4, 5]
    ];
    let flattened = arr.reduce(function (accumulator, currentValue) {
      return accumulator.concat(currentValue);
      // return acc = [...accumulator, ...currentValue]
    }, []);

    console.log(flattened)





    //* 3. 속성으로 객체 분류하기
    const peoples = [
      {
        name: 'Alice',
        age: 21
      },
      {
        name: 'Max',
        age: 20
      },
      {
        name: 'Jane',
        age: 20
      }
    ];

    function groupBy(objectArray, property) {
      return objectArray.reduce(function (accumulator, currentObj) {
        
        const key = currentObj[property];
        console.log(`key : ${key}`);

        if (!accumulator[key]) {
          accumulator[key] = [];
        }

        accumulator[key].push(currentObj);
        return accumulator;
      }, {}); // 누산기를 산술에 쓰지않고 빈 객체나 배열을 줘서 여기에다 담는 용도로도 쓴다.
    };

    const groupedPeople = groupBy(peoples, 'age');
    console.log(groupedPeople)
    console.log(`groupedPeople : ${JSON.stringify(groupedPeople)}`);
    /* "age" 속성으로 객체 분류 (나이 별)

    groupedPeople : {
      "20":[{"name":"Max","age":20},{"name":"Jane","age":20}],
        "21":[{"name":"Alice","age":21}]
    }

    */





    //* 4. 중복 항목 제거
    let arr2 = [1, 2, 1, 2, 3, 5, 4, 5, 3, 4, 4, 4, 4];
    // set 자료형을 이용
    const setData = new Set(arr2)
    console.log(setData)
    console.log([...setData]) // 전개 연산자를 통해 배열로 변환
    

  </script>
</body>

</html>