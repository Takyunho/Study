<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  



<script>
 // this의 3번 case
  // constructor 안에서 쓰면 constructor로 새로 생성되는 오브젝트를 뜻한다.
  // 자바스크립트에서 오브젝트를 비슷한걸 여러개 만들고 싶을 경우 오브젝트를 복사하는게 아니라 constructor라는걸 만들어서 사용한다.
  // 쉽게 말해, constructor는 오브젝트를 복사해서 생성해주는 기계이다.
  
  function 기계(){
    this.이름 = 'kim';
  }
  // 여기서의 this는 기계로부터 새로 생성될 오브젝트들을 의미한다.
  // this.이름 = 'Kim'은 새로생성되는 오브젝트의 이름 key값에 'Kim'이라는 value를 집어넣어주세요 라는 뜻

  var 오브젝트 = new 기계();  // new 키워드릴 이용하면 새로운 오브젝트를 꺼낼 수 있다.
  // 그리고 새로운 오브젝트는 this 덕분에 {이름 : 'kim'}이라는 값을 가지고 있다.



  // --------------------------------------------------------------------
  // this의 4번 case
  // 이벤트리스너 안에서 쓰면 this는 e.currentTarget이라는 의미이다.

  document.getElementById('버튼').addEventListener('click', function(e){
    console.log(e.currentTarget); // e.currentTarget는 지금 이벤트가 동작하는 곳을 뜻함
    // 쉽게 말해 지금 addEventListener가 부착된 HTML요소를 뜻함
    console.log(this);  // e.currentTarget와 똑같은 의미
  })



  // case 1. 이벤트리스너 안에서 콜백함수를 쓴다면 this는?

  // 이벤트리스너 안에서 forEach()라는 반복문 사용
    document.getElementById('버튼').addEventListener('click', function(e){
      var array = [1,2,3];
      array.forEach(function() {
        console.log(this);  // 여기서의 this는 콜백함수안에 있으므로 window가 출력된다.
      });

    })

    // case 2. 오브젝트 안에서 콜백함수를 쓴다면 this는? 
    var 오브젝트 = {
      이름들 : ['김', '이', '박'],
      함수 : function(){      // 함수라는 자료 안에 forEach 반복문 돌림
        오브젝트.이름들.forEach(function(){
          console.log(this);  // 여기서도 this는 콜백함수 안에 있으므로 window
        })
      }
    }

    // case 3. 오브젝트 안에서 콜백함수를 쓸 때 Arrow function을 사용하면?
    var 오브젝트 = {
      이름들 : ['김', '이', '박'],
      함수 : function(){
        오브젝트.이름들.forEach(()=>{
          console.log(this);
          // this값은 function을 만날 때마다 바뀔 수 있기 때문에 내가 원하는 this를 쓰기 힘든 경우가 있다.
          // 이때 arrow function을 사용하면 내부의 this값을 새로 바꿔주지 않기 때문에,
          // this를 사용할 때 유용하다. 따라서 aroow function을 사용할때 this는 오브젝트.이름들이 됨
        })
      }
    }
</script>


</body>
</html>