<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>


  <script>

    // ⭐ spread operator(펼침연산자)
    // (1) Array에 붙이면 대괄호를 제거해준다.
    // ex.
    var 어레이 = ['hello', 'world'];
    console.log(어레이);    // 배열이 출력
    console.log(...어레이); // 문자열이 출력

    // (2) spread operator를 문자에 붙이면 문자를 하나씩 해체해서 펼쳐준다.
    // ex.
    var 문자 = 'hello';
    console.log(문자);    // 문자열이 출력
    console.log(문자[0]); // h 출력
    // 문자도 array처럼 인덱싱이 가능하다. 그래서 스프레드를 하면 펼쳐져서 나오는 것
    console.log(...문자); // 문자가 해체 돼서 출력



    // ⭐ spread operator를 어디다가 쓰면 좋을까?
    // (1) Array 합치기 / 복사에 매우 자주 쓴다.
    var a = [1,2,3];
    var b = [4,5];

    var c = [...a]; // spread operator로 어레이 복사
    console.log(c);

    var d = [...a, ...b]; // spread operator로 어레이 합치기
    console.log(d);

    // spread operator는 특히 deep copy할 때 많이 사용된다.
    var aa = [1,2,3];
    var bb = aa;      // spread operator로 복사하지 않고 그냥 사용하면 값 공유가 일어난다.

    aa[3] = 4;

    console.log(aa);
    console.log(bb);  // bb값을 수정한 적이 없는데 4가 추가됨. 즉, 그냥 등호로 복하사면 값을 공유함

    // 각각 독립적인 값을 가지도록 reference data type(Array나 Object를 레퍼런스 타입이라고함)을 복사하려면 spread operator 사용
    var aa2 = [1,2,3];
    var bb2 = [...aa2]; // spread operator로 어레이 복사 (이걸 deep copy라고 한다.)

    aa2[3] = 4;

    console.log(aa2);
    console.log(bb2);
    

    
    // (2) 오브젝트 합치기/복사
    // 오브젝트에서 deep copy는 오브젝트 안의 오브젝트까지도 엮임현상없이 카피하는걸 뜻합니다.
    // shallow copy는 그냥 맨 위의 오브젝트하나만 카피하는걸 뜻합니다

    var o1 = { a : 1, b : 2};
    var o2 = { ...o1, c : 3 };  // spread operator는 중괄호 벗기기도 가능하다.
    console.log(o2);

    
    // o2를 deep copy하고 싶으면?
    // var o2 = { ...o1 };


    // 근데 카피하다가 값 중복이 일어나면?
    var o3 = { a : 1, b : 2};
    var o4 = { a : 2, ...o3 };  // o4 = {a : 2, a : 1, b : 2} 가 되는데, 값 중복이 발생하므로, 가장 뒤에 있는걸 적용해서 a는 1이된다.
    console.log(o4) // a : 1, b : 2가 출력
    
    var o5 = { ...o3, a : 2 };  // o5 = { a : 1, b : 2, a : 2} 가 되는데, 값 중복이 발생하므로, 가장 뒤에 있는걸 적용해서 a는 2가 된다.
    console.log(o5) // b : 2, a : 2가 출력
    
    // 참고
    // spread operator(...)는 중괄호, 대괄호, 소괄호 안에서만 쓸 수 있음. 밖에서 쓰면 에러남




  </script>


</body>

</html>