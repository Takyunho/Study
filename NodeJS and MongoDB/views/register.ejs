<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">

  <link rel="stylesheet" href="/public/25.style.css">

  <title>Hello, world!</title>
</head>

<body>
  <!-- NavBar -->
  <%- include('nav.html') %>
    <!-- Nav Bar 끝 -->

    <!-- 회원가입기능 -->
    <!-- 그냥 <form> 만들고 거기다가 아이디/비번 입력할 수 있게 만듦
  그리고 전송 누르면 서버로 보내고, 그걸 DB에 저장시키면 끝 -->
    <div class="container mt-4">
      <h2 class="mb-3 mt-3">회원가입</h2>
      <form action="/register" method="POST">
        <div class="form-group">
          <label for="exampleInputEmail1">아이디</label>
          <input type="text" class="form-control" id="userId" name="id" placeholder="영문+숫자포함 5~19자">
          <p id="id-alert">아이디 형식이 잘못되었습니다.</p>
        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">비밀번호</label>
          <input type="text" class="form-control" id="userPw" name="pw" placeholder="최소 8자, 하나 이상의 대문자, 소문자 및 숫자포함">
          <p id="pw-alert">비밀번호가 틀렸거나 빈칸입니다.</p>
        </div>
        <button type="submit" class="btn btn-info">가입</button>
      </form>
    </div>
    <!-- 회원가입기능 끝 -->





    <!-- 제이쿼리 -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

    <script>

      // 아이디 및 비밀번호 검사

      // 폼이 전송될 때
      $('form').on('submit', function (e) {
        var 입력한아이디 = $('#userId').val();
        var 아이디검증 = /^[A-za-z0-9]{5,15}$/g;
        // [영문 대문자 또는 소문자 또는 숫자로 시작하는 아이디, 길이는 5~15자, 끝날때 영문 대문자 또는 소문자 또는 숫자]
        


        // 만약에 이메일 input에 입력된 값이 정규식과 비교했을때 false인 경우
        // 폼전송 막기 + 안내창 띄우기
        if (입력한아이디 == '') {
          e.preventDefault();
          $('#id-alert').html('공백입니다. 다시 입력해주세요.');
          $('#id-alert').show();
        } else if (아이디검증.test(입력한아이디) == false) {
          e.preventDefault(); // 폼의 전송을 막는 코드
          $('#id-alert').html('아이디 형식이 잘못되었습니다.');
          $('#id-alert').show();
        }


        var 입력한비밀번호 = $('#userPw').val();
        var 패스워드검증 = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/;
        // 최소 8 자, 하나 이상의 대문자, 하나의 소문자 및 하나의 숫자

        // 패스워드 입력란에 대문자 들어있는지 검사(대문자가 없으면 전송 X )
        if (패스워드검증.test(입력한비밀번호) == false) {
          e.preventDefault();
          $('#pw-alert').show();
        }

      });

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
      crossorigin="anonymous"></script>
</body>

</html>